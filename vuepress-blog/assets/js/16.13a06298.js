(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{450:function(s,a,t){"use strict";t.r(a);var n=t(24),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"ansible命令运行方式及常用参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ansible命令运行方式及常用参数"}},[s._v("#")]),s._v(" ansible命令运行方式及常用参数")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("命令的格式：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("ansible    清单     -m  模块  -a   模块参数\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("常用的参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("--version    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 显示版本")]),s._v("\n-m module  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 指定模块，默认为command模块")]),s._v("\n-v    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 详细过程  -vv -vvv更详细过程")]),s._v("\n--list    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##显示主机列表，也可以用--list-hosts")]),s._v("\n-k   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##提示输入ssh连接密码，默认key认证")]),s._v("\n-C  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##预执行检测")]),s._v("\n-T  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##执行命令的超时时间，默认10s")]),s._v("\n-b  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##执行sudo切换身份操作")]),s._v("\n-become-user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("USERNAME "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定sudo的用户")]),s._v("\n-K "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##提示输入sudo密码")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"ansible剧本属性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ansible剧本属性"}},[s._v("#")]),s._v(" ansible剧本属性")]),s._v(" "),t("h3",{attrs:{id:"file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#file"}},[s._v("#")]),s._v(" file")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("path   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文件名称")]),s._v("\n\tstate  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定操作状态")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v("  建立\n\t       ansent 删除\n\t       directory  建立目录\n\t       "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("link")]),s._v("   建立链接\n\t       hard 建立硬链接\n\tmode   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定权限")]),s._v("\n\towner  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定文件所有者")]),s._v("\n\tgroup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定文件所有组")]),s._v("\n\tsrc    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 源文件")]),s._v("\n\tdest   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##目标文件")]),s._v("\n\trecurse "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##递归，默认为no")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"path=/mnt/file2 state=touch owner=westos group=westos mode=777"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##path：文件名称")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##state=touch ：建立文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##owener，group：文件的所有者和所有组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##mode：文件的权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"压缩-archive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#压缩-archive"}},[s._v("#")]),s._v(" 压缩：archive")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tpath   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##打包目录或文件名称")]),s._v("\n\tdest   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##生成打包文件的名称")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##打包格式")]),s._v("\n\towner  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文件的所有人")]),s._v("\n\tgroup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文件的所有组")]),s._v("\n\tmode   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文件的权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m archive -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/etc dest=/mnt/etc.tar.gz format=gz owner=westos group=westos mode=777'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##path：原文件或目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##dest：目的文件或目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##format：格式")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##owner：文件所有者")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##group：文件所有组")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##mode：文件权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"解压-unarchive"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压-unarchive"}},[s._v("#")]),s._v(" 解压：unarchive")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("copy         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##默认为yes，从ansible主机复制文件到受控主机")]),s._v("\n\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定为no，从受控主机寻找src原文件  ")]),s._v("\n\t             \n\tremove_src   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##功能与copy相反")]),s._v("\n\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定为yes表示包在受控主机")]),s._v("\n\t             "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定为no表示包在ansible主机")]),s._v("\n\t             \n\tsrc          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##包路径，可以是ansible主机也可以是受控主机")]),s._v("\n\tdest         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##受控主机目录")]),s._v("\n\tmode         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##解压后的文件权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" ansible list1 -m unarchive -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'src=/mnt/dir.tar.gz dest=/opt owner=root group=westos mode=755 copy=yes'")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##src原地址")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#dest目的地址")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##owner文件所有者")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##group文件所有祖")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##mode 解压后的文件权限")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##copy=yes 解压ansible主机文件到受控主机")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"hostname"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hostname"}},[s._v("#")]),s._v(" hostname")]),s._v(" "),t("p",[s._v("作用：管理主机名称")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("name    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定主机名称")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("更改受控主机的主机名")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("hostname")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=linux.westos.org'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"cron"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cron"}},[s._v("#")]),s._v(" cron")]),s._v(" "),t("p",[s._v("作用：计划任务")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tminute   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##分钟")]),s._v("\n\thour     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##小时")]),s._v("\n\tday      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##天")]),s._v("\n\tmonth    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##月")]),s._v("\n\tweekday  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##周")]),s._v("\n\tname     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##任务名称")]),s._v("\n\tjob      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##任务脚本或命令")]),s._v("\n\tdisabled "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##yes禁用计划任务  ")]),s._v("\n\t         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##no启用计划任务")]),s._v("\n\tstate    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## absent：删除计划任务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12345678910")]),s._v("\nansible list1 -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cron")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"job='echo westos' name=test minute=30 \"")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##job：命令")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##name=任务名字")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##minute ：每30min执行一次")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" -e "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#：查看定时任务")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"yum"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum"}},[s._v("#")]),s._v(" yum")]),s._v(" "),t("p",[s._v("作用：配置系统软件仓库源文件")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tname     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定参数名称")]),s._v("\n\tdescription  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定原路径")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定仓库文件名称")]),s._v("\n\tenabled  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##仓库是否启用")]),s._v("\n\tgpgcheck "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##仓库是否检测gpgkey")]),s._v("\n\t\n\tstatee   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##默认值为prsent建立")]),s._v("\n\t         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##absent删除")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试")]),s._v("\nansible list1 -m yum_repository -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file=westos name=AppStream description=AppStream_westos baseurl=http://172.25.254.44.250/rhel8.2/AppStream    enabled=yes gpgcheck=no"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## file:指定仓储名称，会自动添加.repo后缀")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## name：仓库名称")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## description：仓库描述")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## baseurl：url的路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## enabled=1 仓库是启用")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## gpgcheck=no 仓库不检测gpgkey")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h3",{attrs:{id:"service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[s._v("#")]),s._v(" service")]),s._v(" "),t("p",[s._v("作用：管理系统服务状态")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tname   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定服务名称")]),s._v("\n\tstate  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定对服务的动作")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##started")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##stoped")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##restarted")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##reloaded")]),s._v("\n\t       \n\tenabled "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##设定服务开机是否启动")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##yes：开机启动")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##no：开机不启动")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("设定受控主机的httpd服务开机自动启动")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=httpd state=started enabled=yes"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"user"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#user"}},[s._v("#")]),s._v(" user")]),s._v(" "),t("p",[s._v("作用：管理受控主机的用户")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tname     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户名，必须有")]),s._v("\n\tgroup    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户所在的其本组")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("groups")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户所有在的附加组")]),s._v("\n\tappend   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定添加用户附加组，默认为no")]),s._v("\n\tshell    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户默认的shell")]),s._v("\n\tuid      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户的uid号")]),s._v("\n\tcomment  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户的注释信息")]),s._v("\n\t\n\tstate    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定用户是否存在于远程主机")]),s._v("\n\t    \t presend 建立\n\t   \t\t absent  删除\n\t   \t\t \n\tremove   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##yes删除用户的家目录")]),s._v("\n\t         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##默认no")]),s._v("\n\t         \n\tpassword         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##用于指定用户的密码，但是密码为名文")]),s._v("\n\tgenerate_ssh_key "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##生成sshkey")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("建立用户")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=linux state=present'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##name:指定用户名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##state=present：建立用户")]),s._v("\nansible list1 -m user -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name=linux password=westos"')]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"lineinfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lineinfile"}},[s._v("#")]),s._v(" lineinfile")]),s._v(" "),t("p",[s._v("作用：修改受控主机的文件")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tpath   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定要操作的文件")]),s._v("\n\tline   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文本的内容")]),s._v("\n\t\n\tregexp "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##使用正则表达式匹配对应的行")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当替换文本时，如果有多行文本被匹配，只替换最后匹配的那一行")]),s._v("\n     \t   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当删除文本时，如果有多行文本被匹配，那么这些行都会被删除")]),s._v("\n     \t   \n\tstate  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##state的默认值为present")]),s._v("\n\t       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##state=absent时，表示删除文本")]),s._v("\n\t       \n\t backrefs     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当没有根据匹配规则找到对应的行时不做任何更改，默认值为no")]),s._v("\n\t              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当 backrefs=yes时，没有根据匹配规则找到对应的行，会将指定的文本内容添加")]),s._v("\n\t              "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## backrefs=yes时，也可以向后引用regexp变量信息")]),s._v("\n\t            \n\t insertafter  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##将文本插入到指定的行之后，参数的值可以设定为EOF或者正则表达式")]),s._v("\n\t insertbefore "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##将文本插入到指定的行之前，参数的值可以设定为BOF或者正则表达式")]),s._v("\n\t backup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##是否在修改文件前备份")]),s._v("\n\t create  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当要操作的文件不存在时，是否创建对应的文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("ul",[t("li",[s._v("当要操作的文件不存在时，是否创建对应的文件")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" ansible list1 -m lineinfile -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/mnt/file line=\"westos hello\" '")]),s._v("\n ansible list1 -m lineinfile -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/mnt/file line=\"westos hello\" create=yes'")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##create=yes当要操作的文件不存在时，创建对应的文件")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将匹配到的含hello字符串的最后一行行替换为line中的字符串")]),s._v("\n ansible list1 -m lineinfile -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'path=/mnt/file line=\"linux\" regexp='")]),s._v("hello"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("' create=yes\n #当 backrefs=no，同时根据匹配规则找不到相应的行时，将会在文件的结尾插入line的值\nansible list1 -m lineinfile -a '")]),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/mnt/file  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("line")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hellow lee"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("regexp")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lee"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backrefs")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("no'\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"replace"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#replace"}},[s._v("#")]),s._v(" replace")]),s._v(" "),t("p",[s._v("作用：replace模块可以根据我们指定的正则表达式替换文件中的字符，文中所有的被匹配到的字符串都会被替换")]),s._v(" "),t("p",[s._v("常用参数：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tpath    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定要操作的文件")]),s._v("\n\tregexp  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定一个正则表示")]),s._v("\n\t        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##文件中与正则匹配的字符串将会被替换")]),s._v("\n\treplace "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定要替换成的字符")]),s._v("\n\tbackup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##是否在修改文件之前对文件进行备份")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("ul",[t("li",[s._v("将path路径下的文件中的hello替换成linux，并且在修改原文件前备份")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m replace -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'path=/mnt/file regexp="hello" replace="linux" backup=yes\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"setup"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup"}},[s._v("#")]),s._v(" setup")]),s._v(" "),t("ul",[t("li",[s._v("作用：setup模块用于收集远程主机的一些基本信息")])]),s._v(" "),t("p",[s._v("常用参数：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("filter  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##用于进行条件过滤，如果设置，仅返回匹配过滤条件的信息")]),s._v("\n\n ansible list1 -m setup\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#显示过滤条件的信息")]),s._v("\n ansible list1 -m setup -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"filter='ansible_virbr0_nic'\"")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"debug"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debug"}},[s._v("#")]),s._v(" debug")]),s._v(" "),t("p",[s._v("作用：调试模式，用于在调试中输出信息")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tmag  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##调试输出的信息")]),s._v("\n\tvar  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##将莫格任务执行的输出作为变量传递给debug模块")]),s._v("\n\t     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##debug会直接将其打印输出")]),s._v("\n\tverbosity "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##debug的级别（默认是0及，全部显示）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\nansible list1 -m debug -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'msg=hello'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#command"}},[s._v("#")]),s._v(" command")]),s._v(" "),t("p",[s._v("常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tchdir      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##执行命令前先进入到指定目录")]),s._v("\n\tcmd        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##运行命令指定")]),s._v("\n\tcreates    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##如果文件存在则不执行")]),s._v("\n\tremoves    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##如果文件存在将执行")]),s._v("\n\tfree_form  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##在远程主机中执行的命令，此参数不需要加")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"shell"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#shell"}},[s._v("#")]),s._v(" shell")]),s._v(" "),t("p",[s._v("shell模块的功能和command模块类似")]),s._v(" "),t("p",[s._v("shell的常用参数")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("    chdir      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##执行命令前先进入到指定目录")]),s._v("\n\tcmd        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##运行命令指定")]),s._v("\n\tcreates    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##如果文件存在则不执行")]),s._v("\n\tremoves    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##如果文件存在将执行")]),s._v("\n\tfree_form  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##在远程主机中执行的命令，此参数不需要加")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##removes 如果文件存在")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##chdir  进入目录")]),s._v("\n ansible list1 -m shell -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chdir=/mnt rm -rf file1 removers=/mnt/file1"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"script"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#script"}},[s._v("#")]),s._v(" script")]),s._v(" "),t("p",[s._v("功能：在ansible主机中写好的脚本在受控主机中执行")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ansible list1 -m script -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/mnt/test.sh'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"copy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#copy"}},[s._v("#")]),s._v(" copy")]),s._v(" "),t("p",[s._v("功能：从ansible主机复制文件到受控主机\n常用参数")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("\tsrc   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##源文件")]),s._v("\n\tdest  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##目的文件")]),s._v("\n\towner "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定目的地文件的所有人")]),s._v("\n\tgroup  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定目的地文件的所有组")]),s._v("\n\tmode  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定目的地文件的权限")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("backup")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当受控主机中存在和目的文件同名的文件时备份原文件，不过不指定该参数为yes则会覆盖原文件")]),s._v("\n\tcontent "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##指定文本内容直接在受控主机中生成文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n ansible list1 -m copy -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src=/mnt/file dest=/mnt/file owner=westos group=westos"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##src：源文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##dest：目的文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##owner：目的地文件所有者")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##group：目的地文件所有组")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"fetch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fetch"}},[s._v("#")]),s._v(" fetch")]),s._v(" "),t("p",[s._v("功能：从受控主机把文件复制到ansible主机，但不支持目录\n常用参数")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("\tsrc   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##受控主机的原文件")]),s._v("\n\tdest  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##本机路径")]),s._v("\n\tflat  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##参数的值默认为no，复制文件文件时，是按照IP地址进行分类，然后路径是源文件的路径")]),s._v("\n\t      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##flat=yes时，只将文件复制的到ansible本机中")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\nansible list1 -m fetch -a "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"src=/mnt/host dest=/mnt"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##src ：受控主机的文件")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##dest ：ansible主机的目录")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);